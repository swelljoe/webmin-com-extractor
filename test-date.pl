#!/usr/bin/env perl
# Simplistic date converter test script to make sure we're converting 
# inconsistent date formats correctly.
use strict;
use warnings;
use 5.010;

use Time::Piece;
my @dates = ("March 29, 2015", "March 15, 2015", "March 3, 2015", "February 15, 2015", "January 31, 2015", "January 15, 2015", "January 10, 2015", "January 5, 2015", "January 1, 2015", "November 24, 2014", "November 10, 2014", "November 9, 2014", "October 10, 2014", "September 29, 2014", "August 22, 2014", "August 16, 2014", "August 11, 2014", "July 21, 2014", "May 26, 2014", "May 20, 2014", "May 16, 2014", "May 5, 2014", "April 22, 2014", "March 17, 2014", "March 16, 2014", "March 13, 2014", "February 20, 2014", "February 3, 2014", "January 30, 2014", "January 13, 2014", "January 13, 2014", "December 4, 2013", "November 21, 2013", "November 3, 2013", "October 20, 2013", "October 5, 2013", "August 25, 2013", "August 17, 2013", "August 13, 2013", "August 10, 2013", "June 13, 2013", "May 14, 2013", "May 8, 2013", "April 26, 2013", "April 22, 2013", "April 06, 2013", "March 30, 2013", "March 14, 2013", "March 11, 2013", "March 3, 2012", "February 3, 2013", "January 21, 2013", "January 19, 2013", "January 3, 2013", "December 16, 2012", "December 6, 2012", "November 22, 2012", "November 22, 2012", "November 16, 2012", "October 18, 2012", "October 1, 2012", "September 22, 2012", "August 23, 2012", "Jul 18, 2012", "July 13, 2012", "June 30, 2012", "May 24, 2012", "May 3, 2012", "May 1, 2012", "April 30, 2012", "March 31, 2012", "March 30, 2012", "February 22, 2012", "January 27, 2012", "January 21, 2012", "January 19, 2012", "December 11, 2011", "December 1, 2011", "November 1, 2011", "October 4, 2011", "September 21, 2011", "September 20, 2011", "September 11, 2011", "August 5, 2011", "July 31, 2011", "July 31, 2011", "July 9, 2011", "June 28, 2011", "June 2, 2011", "May 31, 2011", "May 24, 2011", "May 4, 2011", "April 26, 2011", "April 22, 2011", "April 20, 2011", "April 4, 2011", "April 1, 2011", "March 30, 2011", "March 25, 2011", "March 23, 2011", "March 5, 2011", "February 21, 2011", "February 12, 2011", "January 23, 2010", "January 23, 2011", "January 11, 2011", "December 1, 2010", "November 21, 2010", "November 07, 2010", "November 2, 2010", "October 21, 2010", "October 9, 2010", "September 27, 2010", "September 18, 2010", "August 28, 2010", "August 23, 2010", "August 11, 2010", "June 24, 2010", "Jun 4, 2010", "Jun 2, 2010", "May 28, 2010", "May 23, 2010", "May 21, 2010", "May 16, 2010", "April 14, 2010", "April 13, 2010", "April 12, 2010", "March 5, 2010", "February 27, 2010", "February 9, 2010", "February 3, 2010", "January 13, 2010", "December 26, 2009", "December 7, 2009", "November 17, 2009", "November 12, 2009", "October 10, 2009", "September 17, 2009", "August 23, 2009", "August 12, 2009", "July 26, 2009", "July 21, 2009", "July 20, 2009", "July 4, 2009", "June 23, 2009", "June 11, 2009", "June 02, 2009", "May 14, 2009", "May 14, 2009", "April 17, 2009", "March 30, 2009", "March 24, 2009", "March 18, 2009", "March 11, 2009", "March 4, 2009", "February 14, 2009", "January 25, 2009", "January 21, 2009", "January 20, 2009", "January 11, 2009", "December 8, 2008", "December 4, 2008", "November 13, 2008", "November 10, 2008", "October 26, 2008", "October 20, 2008", "October 16, 2008", "October 11, 2008", "October 7, 2008", "September 22, 2008", "September 17, 2008", "August 22, 2008", "August 12, 2008", "August 8, 2008", "August 5, 2008", "July 23, 2008", "July 1, 2008", "June 25, 2008", "June 9, 2008", "May 25, 2008", "May 20, 2008", "May 14, 2008", "May 13, 2008", "May 7, 2008", "April 21, 2008", "April 8, 2008", "March 27, 2008", "March 25, 2008", "March 17, 2008", "March 1, 2008", "February 26, 2008", "February 22, 2008", "February 16, 2008", "February 16, 2008", "February 8, 2008", "February 8, 2008", "February 7, 2008", "January 26, 2008", "January 16, 2008", "January 15, 2008", "January 4, 2008", "December 20, 2007", "December 19, 2007", "December 11, 2007", "December 11, 2007", "December 10, 2007", "November 21, 2007", "November 7, 2007", "November 3, 2007", "November 3, 2007", "October 22, 2007", "October 18, 2007", "October 3, 2007", "October 1, 2007", "September 20, 2007", "September 10, 2007", "September 9, 2007", "August 27, 2007", "September 5, 2007", "August 7, 2007", "August 2, 2007", "July 25, 2007", "July 24, 2007", "July 18, 2007", "June 29, 2007", "June 19, 2007", "June 1, 2007", "May 22, 2007", "May 15, 2007", "May 14, 2007", "May 2, 2007", "April 19, 2007", "April 9, 2007", "April 8, 2007", "March 21, 2007", "March 26, 2007", "March 26, 2007", "March 21, 2007", "March 21, 2007", "March 20, 2007", "March 19, 2007");

for my $date (@dates) {
  say $date;
  $date =~ s/Jul 18/July 18/;
  $date =~ s/Jun (\w)+/June $1/;
  my $tp = Time::Piece->strptime($date, "%B %d, %Y");
  my $fixed = $tp->strftime("%Y-%m-%d");
  say $fixed;
}

